extends Node2D

@export (NodePath)onready var target = (get_node(target) as Node2D) if target else get_parent()
@export (NodePath)onready var following_target = (get_node(following_target) as Node2D) if following_target else get_parent()
@export var follow_speed := 10.0

var _following: = false
var _target_position: = Vector2.ZERO



func _ready() -> void :
	_target_position = target.position
	follow()


func _physics_process(delta: float) -> void :
	if _following:
		_target_position = following_target.position

	target.position = lerp(_target_position, target.position, pow(2, - follow_speed * delta))



func follow() -> void :
	_following = true


func stop() -> void :
	_following = false


func toggle() -> void :
	_following = not _following
