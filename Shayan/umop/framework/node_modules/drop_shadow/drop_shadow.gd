extends Sprite2D

@export (NodePath)onready var target = (get_node(target) as Sprite2D) if target else get_parent()
@export var shadow_offset := Vector2.ONE
@export var copy_scale := false
@export var copy_visibility := true
@export var copy_rotation := true



func _ready() -> void :
	texture = target.texture
	self_modulate = Color(0, 0, 0, 0.5)

	if copy_visibility:
		target.connect("visibility_changed", Callable(self, "_on_target_visibility_changed"))


func _process(_delta: float) -> void :
	global_position = target.global_position + shadow_offset
	if copy_scale:
		scale = target.scale
	if copy_rotation:
		global_rotation = target.global_rotation


func update_thingy():
	global_position = target.global_position + shadow_offset
	if copy_scale:
		scale = target.scale
	if copy_rotation:
		rotation = target.rotation




func _on_target_visibility_changed() -> void :
	visible = target.visible
