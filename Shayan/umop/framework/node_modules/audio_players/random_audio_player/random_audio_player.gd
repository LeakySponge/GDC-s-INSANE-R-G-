extends Node

@export var sounds_to_play := 1
@export var min_pitch := 0.9
@export var max_pitch := 1.1
@export var volume_db := - 18.0

@onready var rand = RandomNumberGenerator.new()



func _ready() -> void :
	rand.randomize()



func play(pitch = - 1.0) -> void :
	var available_sounds: = []
	for i in get_children():
		if i is AudioStreamPlayer and not i.playing:
			available_sounds.append(i)

	for i in sounds_to_play:
		if available_sounds.size() == 0:
			break
		var index = rand.randi_range(0, available_sounds.size() - 1)
		available_sounds[index].pitch_scale = randf_range(min_pitch, max_pitch) if pitch < 0.0 else pitch
		available_sounds[index].volume_db = volume_db
		available_sounds[index].play()
		available_sounds.remove(index)
